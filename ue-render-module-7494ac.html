<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😼&lt;/text&gt;&lt;/svg&gt;">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>UE Render Module&nbsp;|&nbsp;Hiko.io</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="UE Render Module">
  
  
    <meta property="og:image" content="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🤒&lt;/text&gt;&lt;/svg&gt;">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😼&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="About Me.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🐱&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>Hiko’s Blog</span>
        </div>
      </a>
    
  
    
  
    
  
    
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
      <div class="Header__Icon">
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🤒&lt;/text&gt;&lt;/svg&gt;"></span>
      </div>
    
    <h1 class="Header__Title">UE Render Module</h1>
    
      <div class="DateTagBar">
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--gray">
            <a href="tag/UnrealEngine.html">UnrealEngine</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--brown">
            <a href="tag/Notes.html">Notes</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/7494ac6cf999447a9891d7fb9d15c442" class="PageRoot"><h1 id="https://www.notion.so/084a48b3fb554412bf5f67f73c6cf7b7" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/084a48b3fb554412bf5f67f73c6cf7b7"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">渲染模块总览</span></span></h1><div id="https://www.notion.so/adfef5730879455482c9c854b10ee50c" class="Bookmark"><a href="https://www.cnblogs.com/timlly/p/15511402.html"><h5 class="Bookmark__Title">剖析虚幻渲染体系（12）- 移动端专题Part 1（UE移动端渲染分析） - 0向往0 - 博客园</h5><p class="Bookmark__Desc">12.1 本篇概述 前面的所有篇章都是基于PC端的延迟渲染管线阐述UE的渲染体系的，特别是剖析虚幻渲染体系（04）- 延迟渲染管线详尽地阐述了在PC端的延迟渲染管线的流程和步骤。 此篇只要针对UE的移动端的渲染管线进行阐述，最终还会对比移动和和PC端的渲染差异，以及特殊的优化措施。本篇主要阐述UE渲</p><p class="Bookmark__Link">https://www.cnblogs.com/timlly/p/15511402.html</p></a></div><div id="https://www.notion.so/be4ab068985a49d9820cd4c38e125312" class="Bookmark"><a href="https://www.cnblogs.com/timlly/p/14817455.html#532-basepass渲染状态"><h5 class="Bookmark__Title">剖析虚幻渲染体系（05）- 光源和阴影 - 0向往0 - 博客园</h5><p class="Bookmark__Desc">5.1 本篇概述 5.1.1 本篇内容 本篇主要阐述UE的以下内容： Shader代码及主要模块。 UE的光源。 UE的阴影。 BasePass的机制和实现，包含C++和Shader。 LightingPass的机制和实现，包含C++和Shader。 其中BasePass和LightingPass在</p><p class="Bookmark__Link">https://www.cnblogs.com/timlly/p/14817455.html#532-basepass渲染状态</p></a></div><div id="https://www.notion.so/2e088455acbb401eab0c57d54aa34ed3" class="Bookmark"><a href="https://www.jianshu.com/p/4d1be6c2b4ef"><h5 class="Bookmark__Title">UE4渲染模块分析</h5><p class="Bookmark__Desc">UE4的渲染模块是一个独立的模块，这篇文章从该模块的设计理念和思路进行剖析。 通常渲染模块由如下几个部分组成: 场景的描述 场景遍历和拣选 渲染的执行 场景的描述 UE4场景...</p><p class="Bookmark__Link">https://www.jianshu.com/p/4d1be6c2b4ef</p></a></div><div id="https://www.notion.so/34631a10662644b1961948edc05fb23b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Unknown">‣</span></span></span></p></div><ul id="https://www.notion.so/7cc7bc0315c94a1aacede811a9761319" class="ColorfulBlock ColorfulBlock--ColorGray TableOfContents"><li class="TableOfContents__Item"><a href="#https://www.notion.so/084a48b3fb554412bf5f67f73c6cf7b7"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">渲染模块总览</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/22f39921a5514a39a1229aecad0b93f4"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">PrePass</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/e613843bc8614c98b9c65ee8d8ba3619"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">BasePass</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/8b14921dd54f443789db6ae51a2e5ab2"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Shader基础模块</strong></strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/b2c589a1968f42cb83ae621299536ae5"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Platform.ush</strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/71e17904b8604b27ab9dcbea8144bb22"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Common.ush</strong></strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/c6e44a02a530448e9194428d65801d58"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">ShadingCommon.ush</strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/8078fee79a2a49bea3715f42169b5c7d"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">BasePassCommon.ush</strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/ef2b8fade4bb4080a0d72423b0a74348"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">BRDF.ush</strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/41d1e56867f443bcb4de8f9736686711"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">VertexFactoryCommon.ush</strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/20ea04eb9cdb41b68bb0189d5ebe1c2e"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">BasePassVertexCommon.ush</strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/c95b23382330466cb21bad3b1a21290f"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">ShadingModels.ush</strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/d57cfa08442b4d9fabdc55491d1428be"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">DeferredShadingCommon.ush</strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/70164e51cbae4851b77abce4029222ce"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">DeferredLightingCommon.ush</strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/ce0f728e610a46539765c52d3920a00c"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">ShadingModelsMaterial.ush</strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/5d9933a1c417460fbb6b4fbfad9d95c8"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">LocalVertexFactoryCommon.ush</strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/6c39ac53a7eb48b1a1577939a93f1cb1"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">LocalVertexFactory.ush</strong></span></span></div></a></li></ul><div id="https://www.notion.so/c4c24bb8ad894ffa995a48883aeee2f2" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F0d608712-81b7-41af-8caa-374d0e8f6ab6%2Fc162e312-323e-4b2f-938d-8a0ab745b77f%2FUntitled.png?width=624&amp;table=block&amp;id=c4c24bb8-ad89-4ffa-995a-48883aeee2f2"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F0d608712-81b7-41af-8caa-374d0e8f6ab6%2Fc162e312-323e-4b2f-938d-8a0ab745b77f%2FUntitled.png?width=624&amp;table=block&amp;id=c4c24bb8-ad89-4ffa-995a-48883aeee2f2" style="width:624px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><pre id="https://www.notion.so/7ddf1f3e1625431899469a3e7a9bde38" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">void</span> FDeferredShadingSceneRenderer<span class="token operator">::</span><span class="token function">Render</span><span class="token punctuation">(</span>FRHICommandListImmediate<span class="token operator">&amp;</span> RHICmdList<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
    
    <span class="token comment">// 绘制场景深度.</span>
    <span class="token function">RenderPrePass</span><span class="token punctuation">(</span>RHICmdList<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
    
    <span class="token comment">// 渲染Base Pass.</span>
    <span class="token function">RenderBasePass</span><span class="token punctuation">(</span>RHICmdList<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
    
    <span class="token comment">// 渲染光源.</span>
    <span class="token function">RenderLights</span><span class="token punctuation">(</span>RHICmdList<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></span></span></span></code></pre><h1 id="https://www.notion.so/22f39921a5514a39a1229aecad0b93f4" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/22f39921a5514a39a1229aecad0b93f4"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">PrePass</span></span></h1><div id="https://www.notion.so/4c53238991454e168b6186538a6bd981" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">5.3 可以看这个函数</span></span></p></div><div id="https://www.notion.so/8f29a845559c410a96fea6e1f7d10ab4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"></span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">void FRendererModule::DrawTileMesh(FCanvasRenderContext&amp; RenderContext, FMeshPassProcessorRenderState&amp; DrawRenderState, const FSceneView&amp; SceneView, FMeshBatch&amp; Mesh, bool bIsHitTesting, const FHitProxyId&amp; HitProxyId, bool bUse128bitRT)</code></span></span></p></div><div id="https://www.notion.so/fcf9180df9d042399a319e301d8ae7d6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/5a2a9fa7ebfb4604841293af8acd0fbc" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">4.27可以看</span></span></p></div><div id="https://www.notion.so/7b603c4f45a94730b3cdfb8e6a424827" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"></span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">bool RenderPrePassViewDynamic(FRHICommandList&amp; RHICmdList, const FViewInfo&amp; View, const FDrawingPolicyRenderState&amp; DrawRenderState);</code></span></span></p></div><div id="https://www.notion.so/6b0fef6bd96941bfa32758e8fd04c994" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h1 id="https://www.notion.so/e613843bc8614c98b9c65ee8d8ba3619" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/e613843bc8614c98b9c65ee8d8ba3619"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">BasePass</span></span></h1><blockquote id="https://www.notion.so/229994262f1345a9979f407a579c5cbb" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">BasePass在</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">FDeferredShadingSceneRenderer::Render</code></span><span class="SemanticString">是在PrePass之后LightingPass之前</span></span></blockquote><div id="https://www.notion.so/3ecb633a916742eab2270ef0120ad966" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"></span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">void FDeferredShadingSceneRenderer::RenderBasePass</code></span></span></p></div><div id="https://www.notion.so/149805d7d1dd493b9b93f3a9a7aa053d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Engine\Source\Runtime\Renderer\Private\BasePassRendering.cpp</span></span></p></div><div id="https://www.notion.so/078804fa8be949c9a9d33c3e5633cb3e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/959059c80e294f88aa2d4d5cd79db275" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F0d608712-81b7-41af-8caa-374d0e8f6ab6%2F2ed8213b-d77b-436d-8a68-21784ae54ea9%2FUntitled.png?width=848&amp;table=block&amp;id=959059c8-0e29-4f88-aa2d-4d5cd79db275"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F0d608712-81b7-41af-8caa-374d0e8f6ab6%2F2ed8213b-d77b-436d-8a68-21784ae54ea9%2FUntitled.png?width=848&amp;table=block&amp;id=959059c8-0e29-4f88-aa2d-4d5cd79db275" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/ae639026b5844d52a61af3a495dbe6eb" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h1 id="https://www.notion.so/8b14921dd54f443789db6ae51a2e5ab2" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/8b14921dd54f443789db6ae51a2e5ab2"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Shader基础模块</strong></strong></span></span></h1><h3 id="https://www.notion.so/b2c589a1968f42cb83ae621299536ae5" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/b2c589a1968f42cb83ae621299536ae5"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Platform.ush</strong></span></span></h3><blockquote id="https://www.notion.so/f88fe7f71b1b46eb8da37f3c5fd3475b" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">主要定义了跟图形API（DirectX、OpenGL、Vulkan、Metal）和FEATURE_LEVEL相关的宏、变量及工具类接口</span></span></blockquote><pre id="https://www.notion.so/37887d607bf342ea93e80ac329c0a729" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token comment">// FEATURE_LEVEL的宏定义</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FEATURE_LEVEL_ES2_REMOVED</span>    <span class="token expression"><span class="token number">1</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FEATURE_LEVEL_ES3_1</span>            <span class="token expression"><span class="token number">2</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FEATURE_LEVEL_SM3</span>            <span class="token expression"><span class="token number">3</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FEATURE_LEVEL_SM4</span>            <span class="token expression"><span class="token number">4</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FEATURE_LEVEL_SM5</span>            <span class="token expression"><span class="token number">5</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FEATURE_LEVEL_MAX</span>            <span class="token expression"><span class="token number">6</span></span></span>

<span class="token comment">// 初始化平台相关的宏.</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">COMPILER_HLSLCC</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">COMPILER_HLSLCC</span> <span class="token expression"><span class="token number">0</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">COMPILER_HLSL</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">COMPILER_HLSL</span> <span class="token expression"><span class="token number">0</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

<span class="token comment">// 浮点数精度</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">FORCE_FLOATS</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FORCE_FLOATS</span> <span class="token expression"><span class="token number">0</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

<span class="token comment">// PROFILE宏定义</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">PS4_PROFILE</span></span>
    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FEATURE_LEVEL</span> <span class="token expression">FEATURE_LEVEL_SM5</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">elif</span> <span class="token expression">SM5_PROFILE</span></span>
    <span class="token comment">// SM5 = full dx11 features (high end UE4 rendering)</span>
    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FEATURE_LEVEL</span> <span class="token expression">FEATURE_LEVEL_SM5</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">elif</span> <span class="token expression">SM4_PROFILE</span></span>
    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FEATURE_LEVEL</span> <span class="token expression">FEATURE_LEVEL_SM4</span></span>

<span class="token comment">// 分支语句.</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">BRANCH</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">BRANCH</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">FLATTEN</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FLATTEN</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

<span class="token operator">/</span> 工具类接口<span class="token punctuation">(</span>编译不支持时<span class="token punctuation">)</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token operator">!</span>COMPILER_SUPPORTS_MINMAX3</span></span>

<span class="token keyword">float</span> <span class="token function">min3</span><span class="token punctuation">(</span> <span class="token keyword">float</span> a<span class="token punctuation">,</span> <span class="token keyword">float</span> b<span class="token punctuation">,</span> <span class="token keyword">float</span> c <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> <span class="token function">max3</span><span class="token punctuation">(</span> <span class="token keyword">float</span> a<span class="token punctuation">,</span> <span class="token keyword">float</span> b<span class="token punctuation">,</span> <span class="token keyword">float</span> c <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 解压数据.</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token operator">!</span><span class="token function">defined</span><span class="token punctuation">(</span>COMPILER_SUPPORTS_UNPACKBYTEN<span class="token punctuation">)</span></span></span>
<span class="token keyword">float</span> <span class="token function">UnpackByte0</span><span class="token punctuation">(</span><span class="token keyword">uint</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">float</span><span class="token punctuation">(</span>v <span class="token operator">&amp;</span> <span class="token number">0xff</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">float</span> <span class="token function">UnpackByte1</span><span class="token punctuation">(</span><span class="token keyword">uint</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">float</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v <span class="token operator">>></span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0xff</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">float</span> <span class="token function">UnpackByte2</span><span class="token punctuation">(</span><span class="token keyword">uint</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">float</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v <span class="token operator">>></span> <span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0xff</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token comment">// 封装部分宏.</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">SNORM</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">COMPILER_HLSLCC <span class="token operator">||</span> PS4_PROFILE</span></span>
    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">SNORM</span> </span>
    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">UNORM</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">SNORM</span> <span class="token expression">snorm</span></span>
    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">UNORM</span> <span class="token expression">unorm</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span></span></span></span></code></pre><h2 id="https://www.notion.so/71e17904b8604b27ab9dcbea8144bb22" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/71e17904b8604b27ab9dcbea8144bb22"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Common.ush</strong></strong></span></span></h2><pre id="https://www.notion.so/4ca945a719fb499d8e1982056e5a211d" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token comment">// 类型定义或封装</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">PIXELSHADER</span></span>
    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MaterialFloat</span> <span class="token expression"><span class="token keyword">half</span></span></span>

<span class="token keyword">struct</span> <span class="token class-name">FScreenVertexOutput</span>

<span class="token keyword">struct</span> <span class="token class-name">FPixelShaderIn</span>
<span class="token keyword">struct</span> <span class="token class-name">FPixelShaderOut</span>

<span class="token comment">// 宏、常量定义</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">USE_GLOBAL_CLIP_PLANE</span> <span class="token expression"><span class="token punctuation">(</span>PLATFORM_SUPPORTS_GLOBAL_CLIP_PLANE <span class="token operator">&amp;&amp;</span> PROJECT_ALLOW_GLOBAL_CLIP_PLANE <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>MATERIAL_DOMAIN_POSTPROCESS <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>MATERIAL_DOMAIN_UI<span class="token punctuation">)</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">POSITIVE_INFINITY</span> <span class="token expression"><span class="token punctuation">(</span><span class="token function">asfloat</span><span class="token punctuation">(</span><span class="token number">0x7F800000</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NEGATIVE_INFINITY</span> <span class="token expression"><span class="token punctuation">(</span><span class="token function">asfloat</span><span class="token punctuation">(</span><span class="token number">0xFF800000</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>

<span class="token keyword">const</span> <span class="token keyword">static</span> MaterialFloat PI <span class="token operator">=</span> <span class="token number">3.1415926535897932f</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">static</span> <span class="token keyword">float</span> MaxHalfFloat <span class="token operator">=</span> <span class="token number">65504.0f</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">static</span> <span class="token keyword">float</span> Max10BitsFloat <span class="token operator">=</span> <span class="token number">64512.0f</span><span class="token punctuation">;</span>

<span class="token comment">// 通用变量定义</span>
Texture2D        LightAttenuationTexture<span class="token punctuation">;</span>
SamplerState    LightAttenuationTextureSampler<span class="token punctuation">;</span>

<span class="token comment">// 基础、工具接口</span>
<span class="token keyword">float</span>  <span class="token function">ClampToHalfFloatRange</span><span class="token punctuation">(</span><span class="token keyword">float</span>  X<span class="token punctuation">)</span><span class="token punctuation">;</span>
float2 <span class="token function">ClampToHalfFloatRange</span><span class="token punctuation">(</span>float2 X<span class="token punctuation">)</span><span class="token punctuation">;</span>
float3 <span class="token function">ClampToHalfFloatRange</span><span class="token punctuation">(</span>float3 X<span class="token punctuation">)</span><span class="token punctuation">;</span>
float4 <span class="token function">ClampToHalfFloatRange</span><span class="token punctuation">(</span>float4 X<span class="token punctuation">)</span><span class="token punctuation">;</span>
float2 <span class="token function">Tile1Dto2D</span><span class="token punctuation">(</span><span class="token keyword">float</span> xsize<span class="token punctuation">,</span> <span class="token keyword">float</span> idx<span class="token punctuation">)</span><span class="token punctuation">;</span>
MaterialFloat <span class="token function">Luminance</span><span class="token punctuation">(</span> MaterialFloat3 LinearColor <span class="token punctuation">)</span><span class="token punctuation">;</span>
MaterialFloat <span class="token function">length2</span><span class="token punctuation">(</span>MaterialFloat2 v<span class="token punctuation">)</span><span class="token punctuation">;</span>
MaterialFloat <span class="token function">length2</span><span class="token punctuation">(</span>MaterialFloat3 v<span class="token punctuation">)</span><span class="token punctuation">;</span>
MaterialFloat <span class="token function">length2</span><span class="token punctuation">(</span>MaterialFloat4 v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">uint</span> <span class="token function">Mod</span><span class="token punctuation">(</span><span class="token keyword">uint</span> a<span class="token punctuation">,</span> <span class="token keyword">uint</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
uint2 <span class="token function">Mod</span><span class="token punctuation">(</span>uint2 a<span class="token punctuation">,</span> uint2 b<span class="token punctuation">)</span><span class="token punctuation">;</span>
uint3 <span class="token function">Mod</span><span class="token punctuation">(</span>uint3 a<span class="token punctuation">,</span> uint3 b<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// 数学</span>
<span class="token keyword">float</span> <span class="token function">Square</span><span class="token punctuation">(</span> <span class="token keyword">float</span> x <span class="token punctuation">)</span><span class="token punctuation">;</span>
float2 <span class="token function">Square</span><span class="token punctuation">(</span> float2 x <span class="token punctuation">)</span><span class="token punctuation">;</span>
float3 <span class="token function">Square</span><span class="token punctuation">(</span> float3 x <span class="token punctuation">)</span><span class="token punctuation">;</span>
float4 <span class="token function">Square</span><span class="token punctuation">(</span> float4 x <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> <span class="token function">Pow2</span><span class="token punctuation">(</span> <span class="token keyword">float</span> x <span class="token punctuation">)</span><span class="token punctuation">;</span>
float2 <span class="token function">Pow2</span><span class="token punctuation">(</span> float2 x <span class="token punctuation">)</span><span class="token punctuation">;</span>
float3 <span class="token function">Pow2</span><span class="token punctuation">(</span> float3 x <span class="token punctuation">)</span><span class="token punctuation">;</span>
float4 <span class="token function">Pow2</span><span class="token punctuation">(</span> float4 x <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> <span class="token function">Pow3</span><span class="token punctuation">(</span> <span class="token keyword">float</span> x <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 求导</span>
<span class="token keyword">float</span> <span class="token function">DDX</span><span class="token punctuation">(</span><span class="token keyword">float</span> Input<span class="token punctuation">)</span><span class="token punctuation">;</span>
float2 <span class="token function">DDX</span><span class="token punctuation">(</span>float2 Input<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 数据编码解码</span>
MaterialFloat <span class="token function">EncodeLightAttenuation</span><span class="token punctuation">(</span>MaterialFloat InColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
MaterialFloat4 <span class="token function">EncodeLightAttenuation</span><span class="token punctuation">(</span>MaterialFloat4 InColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 纹理采样</span>
aterialFloat4 <span class="token function">Texture1DSample</span><span class="token punctuation">(</span>Texture1D Tex<span class="token punctuation">,</span> SamplerState Sampler<span class="token punctuation">,</span> <span class="token keyword">float</span> UV<span class="token punctuation">)</span><span class="token punctuation">;</span>
MaterialFloat4 <span class="token function">Texture2DSample</span><span class="token punctuation">(</span>Texture2D Tex<span class="token punctuation">,</span> SamplerState Sampler<span class="token punctuation">,</span> float2 UV<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 特殊采样，噪点</span>
float4 <span class="token function">PseudoVolumeTexture</span><span class="token punctuation">(</span>Texture2D Tex<span class="token punctuation">,</span> SamplerState TexSampler<span class="token punctuation">,</span> float3 inPos<span class="token punctuation">,</span> float2 xysize<span class="token punctuation">,</span> <span class="token keyword">float</span> numframes<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 光照计算</span>
MaterialFloat <span class="token function">PhongShadingPow</span><span class="token punctuation">(</span>MaterialFloat X<span class="token punctuation">,</span> MaterialFloat Y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 坐标、空间转换</span>
float2 <span class="token function">CalcScreenUVFromOffsetFraction</span><span class="token punctuation">(</span>float4 ScreenPosition<span class="token punctuation">,</span> float2 OffsetFraction<span class="token punctuation">)</span><span class="token punctuation">;</span>
float4 <span class="token function">GetPerPixelLightAttenuation</span><span class="token punctuation">(</span>float2 UV<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> <span class="token function">ConvertFromDeviceZ</span><span class="token punctuation">(</span><span class="token keyword">float</span> DeviceZ<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 几何体交互: 求交, 距离等.</span>
float2 <span class="token function">LineBoxIntersect</span><span class="token punctuation">(</span>float3 RayOrigin<span class="token punctuation">,</span> float3 RayEnd<span class="token punctuation">,</span> float3 BoxMin<span class="token punctuation">,</span> float3 BoxMax<span class="token punctuation">)</span><span class="token punctuation">;</span>
MaterialFloat <span class="token function">ComputeDistanceFromBoxToPoint</span><span class="token punctuation">(</span>MaterialFloat3 Mins<span class="token punctuation">,</span> MaterialFloat3 Maxs<span class="token punctuation">,</span> MaterialFloat3 InPoint<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 绘制接口</span>
<span class="token keyword">void</span> <span class="token function">DrawRectangle</span><span class="token punctuation">(</span><span class="token keyword">in</span> float4 InPosition<span class="token punctuation">,</span> <span class="token keyword">in</span> float2 InTexCoord<span class="token punctuation">,</span> <span class="token keyword">out</span> float4 OutPosition<span class="token punctuation">,</span> <span class="token keyword">out</span> float2 OutTexCoord<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">DrawRectangle</span><span class="token punctuation">(</span><span class="token keyword">in</span> float4 InPosition<span class="token punctuation">,</span> <span class="token keyword">in</span> float2 InTexCoord<span class="token punctuation">,</span> <span class="token keyword">out</span> float4 OutPosition<span class="token punctuation">,</span> <span class="token keyword">out</span> float4 OutUVAndScreenPos<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span></span></code></pre><div id="https://www.notion.so/3dbab9af024649f98a92d0d0a29f74d1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/c6e44a02a530448e9194428d65801d58" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/c6e44a02a530448e9194428d65801d58"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">ShadingCommon.ush</strong></span></span></h3><div id="https://www.notion.so/12564b12222040ceb063aa44815d94b8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">此模块主要是定义了材质所有着色模型，并提供了少量相关的工具类接口</span></span></p></div><div id="https://www.notion.so/19c031cb0301474f848cd35beae7f646" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/8078fee79a2a49bea3715f42169b5c7d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/8078fee79a2a49bea3715f42169b5c7d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">BasePassCommon.ush</strong></span></span></h3><div id="https://www.notion.so/3363759617d041889fa791827c5c813d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">此模块定义了BasePass的一些变量、宏定义、插值结构体和工具类接口</span></span></p></div><div id="https://www.notion.so/d6448579f6234da0855d87528a7214aa" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/ef2b8fade4bb4080a0d72423b0a74348" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/ef2b8fade4bb4080a0d72423b0a74348"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">BRDF.ush</strong></span></span></h3><div id="https://www.notion.so/9c20263e979d47aca91bd3692fc6e85b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">双向反射分布函数模块，提供了很多基础光照算法及相关辅助接口</span></span></p></div><div id="https://www.notion.so/39ecad282ee340dba58503b0dcd0110c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/41d1e56867f443bcb4de8f9736686711" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/41d1e56867f443bcb4de8f9736686711"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">VertexFactoryCommon.ush</strong></span></span></h3><div id="https://www.notion.so/7307427e95bc4787aa7f76509a8e132a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">此模块主要定义了顶点变换相关的辅助接口</span></span></p></div><div id="https://www.notion.so/1c44e4ef23ce4a8e8dd31b2e5892450b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/20ea04eb9cdb41b68bb0189d5ebe1c2e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/20ea04eb9cdb41b68bb0189d5ebe1c2e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">BasePassVertexCommon.ush</strong></span></span></h3><div id="https://www.notion.so/adae347300854e43805c4e0d426e3d3b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">此模块定义了一些BasePass通用的结构体、宏</span></span></p></div><div id="https://www.notion.so/cd178c5b9e894372808d068c14b01cf8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/c95b23382330466cb21bad3b1a21290f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/c95b23382330466cb21bad3b1a21290f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">ShadingModels.ush</strong></span></span></h3><div id="https://www.notion.so/fcb124eedb4d43c088bb4d01cfa46869" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">此模块主要是着色模型以及光照计算相关的类型和辅助接口</span></span></p></div><div id="https://www.notion.so/0783ae46c4574f39aa1216a12ae1fe74" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/d57cfa08442b4d9fabdc55491d1428be" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/d57cfa08442b4d9fabdc55491d1428be"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">DeferredShadingCommon.ush</strong></span></span></h3><div id="https://www.notion.so/03ee71469ae641bcae9eba70ecd40289" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">此模块主要定义了延迟光照着色的通用的接口、宏、变量、类型</span></span></p></div><div id="https://www.notion.so/729df2b1808d4877a4a75557a6e399ca" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/70164e51cbae4851b77abce4029222ce" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/70164e51cbae4851b77abce4029222ce"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">DeferredLightingCommon.ush</strong></span></span></h3><div id="https://www.notion.so/2a2dc8235977466cb5759af69ece1b51" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">此模块定义了延迟光照相关的通用的接口、宏、变量、类型</span></span></p></div><div id="https://www.notion.so/2e932240f20141f38d2c021ab19cf74a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/ce0f728e610a46539765c52d3920a00c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/ce0f728e610a46539765c52d3920a00c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">ShadingModelsMaterial.ush</strong></span></span></h3><div id="https://www.notion.so/2e942e22692a41ae91f0d8fe19299d8a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">提供了根据材质和指定参数设置GBuffe的接口</span></span></p></div><div id="https://www.notion.so/b820b38663e143eb8d39449d0138c85a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/5d9933a1c417460fbb6b4fbfad9d95c8" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/5d9933a1c417460fbb6b4fbfad9d95c8"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">LocalVertexFactoryCommon.ush</strong></span></span></h3><div id="https://www.notion.so/ffe2a993fb6f4d4190e9f74cf7cbc639" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">局部顶点工厂通用模块，定义了顶点工厂的数据插值结构体及部分辅助接口</span></span></p></div><div id="https://www.notion.so/377e77e769714368a225d01e956b735c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/6c39ac53a7eb48b1a1577939a93f1cb1" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/6c39ac53a7eb48b1a1577939a93f1cb1"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">LocalVertexFactory.ush</strong></span></span></h3><div id="https://www.notion.so/8f924e0376b0458a9878c56df0c41b7b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">局部顶点工厂模块，定义了骨骼蒙皮、顶点着色器等相关的数据类型和接口</span></span></p></div><div id="https://www.notion.so/b61e6526b4b94b79bb333e29c672437f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/1f7071cb9b194ebf82d87647a274d7ad" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div></article>
  <footer class="Footer">
  <div>&copy; Hiko.io 2022</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>